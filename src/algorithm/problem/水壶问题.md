## 水壶问题通解

有两个容量分别为 a 升 和 b 升 的水壶以及无限多的水。请判断能否通过使用这两个水壶，从而可以得到恰好 x 升的水？你允许进行以下三种操作：

1. 装满任意一个水壶。
2. 清空任意一个水壶。
3. 从一个水壶向另外一个水壶倒水，直到装满或者倒空。

如果要求最短操作，我们可以使用广度优先搜索，这样可以得到最短的步骤数及对应的步骤。

但我没有想过这个问题有通解，所以我在《计算机科学中的数学》中看到通解的时候，还是比较惊讶，因为我发现我根本就没有想过这个问题。下面给出关键的步骤。

1. 通过状态的转移，证明在每一个时刻，每一个壶中的水的总量总是 a 和 b 的线性组合。
2. a 和 b 的最大公约数是 a 和 b 的线性组合，即存在整数 s 和 t 使得 gcd(a,b) = sa + tb。
3. 一个整数是 a 和 b 的线性组合，当且仅当它是 gcd(a,b) 的倍数。
4. 每一个水壶的水的总量始终是 gcd(a,b) 的倍数。

如果说要得到 x 升水，当且仅当 x 是 a 和 b 的最大公约数的倍数时，才能得到 x 升的水。根据这个结论，我们可以写出如下的代码。

```cpp
int gcd(int a, int b){
    return b == 0?a:gcd(b,a%b);
}

bool canMeasureWater(int jug1Capacity, int jug2Capacity, int targetCapacity) {
    int x= gcd(jug1Capacity, jug2Capacity);
    return targetCapacity % x == 0 && targetCapacity <= jug1Capacity + jug2Capacity;
}
```

但上面我们只直到是否能够成功，我们还需要一个可行的操作步骤。因为 x 可以用 x=sa + tb 表示，我们可以枚举 s 和 t 的值，直到得到 x 的值。注意到，我们可以通过调整 s 和 t 使得 t 为负数。所以，我们可以得到以下的通解。

1. 装满较小的水壶。
2. 将小壶中的所有水倒入大壶。每当大水壶被装满时，将其倒空，并继续将小壶中的水倒入大壶中。
3. 记录大壶中的水量，直到等于 x。
