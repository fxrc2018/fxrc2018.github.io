## 前缀和与差分

对于一个给定的数列 A，它的前缀和为：

$$
S[i] = \sum_{j-1}^{i}A[j]
$$

一个部分和，即数列 A 某个下标区间内的数的和，可表示为前缀和相减的形式：

$$
sum(l, r) = S[r] - S[l-1]
$$

通过预处理出前缀和，可以很方便地得到某个区间的和。

对于一个给定的数列 A，它的差分数列 B 定义为：

$$
B[1] = A[1], B[i] = A[i] - A[i-1](2]\le i \le n)
$$

把序列 A 的区间 [l, r] 加上 d， 其差分序列 B 的变化为 B[l] 加上 d，B[r+1]减 d，其他位置不变。差分数组可以把原序列的区间操作转化为差分序列上的单点操作进行计算，降低求解难度。

容易发现，前缀和与差分是一对互逆运算，差分序列 B 的前缀和序列就是原序列 A，前缀和序列 S 的差分序列也是原序列 A。