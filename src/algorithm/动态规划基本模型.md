## 动态规划基本模型

动态规划算法把原问题视作若干个重叠子问题的逐层递进，每个子问题的求解过程都构成一个“阶段”。在完成前一个阶段的计算后，动态规划才会执行下一阶段的计算。

为了保证这些计算能够按顺序、不重复地进行，动态规划要求已经求解的子问题不受后续阶段的影响。这种条件也被叫做“无后效性”。换言之，动态规划对状态空间的遍历构成一张有向无环图，遍历顺序就是该有向图无环图的一个拓扑序。有向无环图中的节点对应问题中的“状态”，图中的边则对应状态之间的“转移”，转移的选取就是动态规划中的“决策”。

在很多情况下，动态规划用于求解最优化问题。此时，下一阶段的最优解应该能够由前面各阶段子问题的最优解导出。这个条件被称为“最优子结构性质”。

“状态”、“阶段”和“决策”是构成动态规划算法的三要素，而“子问题重叠性”，“无后效性”和“最优子结构”是问题能用动态规划求解的三个基本条件。

### 线性DP

线性DP的经典例题有，最长上升子序列(LIS)，最长公共子序列(LCS)、数字三角形。

### 背包

#### 01背包

给定`N`个物品，其中第`i`个物品的体积为`V[i]`，价值为`W[i]`。有一个容积为`M`的背包，要求选择一些物品放入背包，使得物品中提及不超过`M`的前提下，物品的价值总和最大。

#### 完全背包

给定`N`个物品，其中第`i`个物品的体积为`V[i]`，价值为`W[i]`，并且有无数个。有一个容积为`M`的背包，要求选择一些物品放入背包，使得物品中提及不超过`M`的前提下，物品的价值总和最大。

#### 多重背包

给定`N`个物品，其中第`i`个物品的体积为`V[i]`，价值为`W[i]`，并且有`C[i]`个。有一个容积为`M`的背包，要求选择一些物品放入背包，使得物品中提及不超过`M`的前提下，物品的价值总和最大。

#### 分组背包

给定`N`组物品，其中第`i`组有`C[i]`个物品。第`i`组的第`j`个物品的体积为`V[i][j]`，价值为`W[i][j]`。有一容积为`M`的背包，要求选择若干物品放入背包，使得每组物品至多选择一个物品并且物品总体积不超过`M`的前提下，物品的价值总和最大。

### 区间DP

区间DP也属于线性DP的一种，它以“区间长度”作为DP的“阶段”，使用两个坐标（区间的左右端点）描述每个维度。在区间DP中，一个状态由若干比它更小且包含于它的区间所代表的状态转移而来，因此区间DP的决策往往就是划分区间的方法。区间DP的初始状态一般就是由长度为1的“元区间”构成。这种向下划分、在向上递推的模式与某些树形结构，如线段树，有很大的相似之处。

先枚举区间长度，然后枚举左右端点。

### 树形DP

给定一颗有`N`个节点的树，我们可以任选一个节点为根节点，从而定义出每个节点的深度和每颗子树的根。在树上设计动态规划算法时，一般以节点从深到浅（子树从小到大）的顺序作为DP的“阶段”。DP的状态表示中，第一维通常是节点编号（代表以该节点为根的子树）。大多数时候，我们采用递归的方式实现树形动态规划。对于每个节点`x`，先递归在它的每个子节点上进行DP，在回溯时，从子节点向节点`x`进行状态转移。

### 状态压缩DP

对于某些问题，我们需要在动态规划的“状态”中记录一个集合，保存这个状态的详细信息，以便进行状态转移。若集合大小不超过`N`，集合中每个元素都是小于`K`的自然数，则我们可以把这个集合看作一个`N`位`K`进制数，以一个$$[0,K^N-1]$$之间的十进制整数的形式作为DP状态的一维。这个把集合转化为整数记录在DP状态中的一类算法，被称为状态压缩动态规划算法。