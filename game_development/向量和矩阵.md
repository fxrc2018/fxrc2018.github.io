## 向量和矩阵

### 向量

属性：

- 方向
- 长度

我们并不关心向量的位置。

运算：

- 加法
- 减法
- 点乘
- 叉乘

点乘可以用来计算夹角和计算投影。叉乘可以用来判断一个点是否在一个三角形的内部。

### 矩阵和变换

- 模型变换
- 视图变换
- 投影变换

#### 平移矩阵

$$
\left(\begin{matrix}
    X + T_x\\
    Y + T_y\\
    Z + T_z\\
    1
\end{matrix}\right) =
\left[\begin{matrix}
   1 & 0 & 0 & T_x \\
   0 & 1 & 0 & T_y \\
   0 & 0 & 1 & T_z \\
   0 & 0 & 0 & 1
  \end{matrix}\right] \times 
  \left(\begin{matrix}
    X \\
    Y \\
    Z \\
    1
\end{matrix}\right)
$$

#### 缩放矩阵

$$
\left(\begin{matrix}
    X * S_x\\
    Y * S_y\\
    Z * S_z\\
    1
\end{matrix}\right) =
\left[\begin{matrix}
   S_x & 0 & 0 & 0 \\
   0 & S_y & 0 & 0 \\
   0 & 0 & S_z & 0 \\
   0 & 0 & 0 & 1
  \end{matrix}\right] \times 
  \left(\begin{matrix}
    X \\
    Y \\
    Z \\
    1
\end{matrix}\right)
$$

#### 旋转矩阵

- 绕X轴旋转

$$
\left(\begin{matrix}
    X^\prime \\
    Y^\prime \\
    Z^\prime \\
    1
\end{matrix}\right) =
\left[\begin{matrix}
   1 & 0 & 0 & 0 \\
   0 & \cos\theta & -\sin\theta & 0 \\
   0 & \sin\theta & \cos\theta & 0 \\
   0 & 0 & 0 & 1
  \end{matrix}\right] \times 
  \left(\begin{matrix}
    X \\
    Y \\
    Z \\
    1
\end{matrix}\right)
$$

- 绕Y轴旋转

$$
\left(\begin{matrix}
    X^\prime \\
    Y^\prime \\
    Z^\prime \\
    1
\end{matrix}\right) =
\left[\begin{matrix}
   \cos\theta & 0 & \sin\theta & 0 \\
   0 & 1 & 0 & 0 \\
   -\sin\theta & 0 & \cos\theta & 0 \\
   0 & 0 & 0 & 1
  \end{matrix}\right] \times 
  \left(\begin{matrix}
    X \\
    Y \\
    Z \\
    1
\end{matrix}\right)
$$

- 绕Z轴旋转

$$
\left(\begin{matrix}
    X^\prime \\
    Y^\prime \\
    Z^\prime \\
    1
\end{matrix}\right) =
\left[\begin{matrix}
   \cos\theta & -\sin\theta & 0 & 0 \\
   \sin\theta & \cos\theta & 0 & 0 \\
   0 & 0 & 1 & 0 \\
   0 & 0 & 0 & 1
  \end{matrix}\right] \times 
  \left(\begin{matrix}
    X \\
    Y \\
    Z \\
    1
\end{matrix}\right)
$$

如果旋转轴不在原点，需要额外执行以下操作：

1. 平移旋转轴以使它经过原点；
2. 绕X轴、Y轴、Z轴旋转适当的欧拉角；
3. 复原步骤1中的平移。